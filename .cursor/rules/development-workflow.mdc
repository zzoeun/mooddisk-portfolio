# Development Workflow

## Getting Started

1. **Clone Repository**: `git clone [repository-url]`
2. **Install Dependencies**: `yarn install` (루트에서 실행)
3. **Build Packages**: `yarn build:packages` (공유 패키지 빌드)
4. **Backend Setup**:
   - Install Java 17
   - Run `./gradlew build` to build backend
   - Configure `.env` file with OAuth credentials
5. **Start Development**:
   - Frontend: `yarn dev:frontend` (웹 앱)
   - Mobile: `yarn dev:mobile` (모바일 앱)

## Development Commands

### Monorepo Commands

- **Build All Packages**: `yarn build:packages`
- **Build Packages Watch**: `yarn build:packages:watch` (자동 빌드)
- **Frontend Dev**: `yarn dev:frontend` (웹 앱 개발, 패키지 자동 빌드)
- **Mobile Dev**: `yarn dev:mobile` (모바일 앱 개발)
- **Packages Dev**: `yarn dev:packages` (패키지만 개발)
- **Clean**: `yarn clean` (모든 빌드 파일 정리)
- **Clean Packages**: `yarn clean:packages` (패키지 dist만 정리)

### Package Commands

- **Build Package**: `yarn workspace @mooddisk/types build`
- **Dev Package**: `yarn workspace @mooddisk/types dev` (감시 모드)
- **Clean Package**: `yarn workspace @mooddisk/types clean` (dist 정리)
- **Type Check**: `yarn workspace @mooddisk/types type-check` (타입 체크만)
- **Frontend Start**: `yarn workspace frontend start`
- **Mobile Start**: `yarn workspace mobile start`

### Backend Commands

- **Backend**: `./gradlew bootRun` (runs on port 8080)
- **Build**: `./gradlew build` (builds backend)
- **Test**: `./gradlew test` (backend tests)

## Common Development Tasks

### Adding New API Endpoint

1. Create/update entity in `data.entity`
2. Create/update repository in `data.repository`
3. Create/update service in `service`
4. Create/update controller in `web.controller`
5. Create/update DTOs in `web.dto`
6. Test endpoint with Postman/curl

### Adding New Frontend Feature

1. Create TypeScript types in `src/types`
2. Create API client in `src/api`
3. Create components in appropriate directory
4. Create page component in `src/pages`
5. Add routing in `AppRouter.tsx`
6. Test feature end-to-end

### Database Changes

1. Create migration script
2. Update entity classes
3. Update repository interfaces
4. Test with sample data
5. Deploy migration to production

## Code Review Process

1. Create feature branch from `main`
2. Implement feature with tests
3. Create pull request
4. Code review by team members
5. Address feedback and merge

## Testing Strategy

- **Unit Tests**: Backend services and frontend components
- **Integration Tests**: API endpoints
- **E2E Tests**: Critical user flows
- **Manual Testing**: UI/UX validation

## Debugging Tips

- Use Spring Boot DevTools for hot reload
- Use React DevTools for frontend debugging
- Check application logs in `logs/` directory
- Use browser developer tools for API calls
- Use database client for data inspection

## Performance Optimization

- Monitor bundle sizes with `yarn build`
- Use React.memo for expensive components
- Implement proper caching strategies
- Optimize database queries
- Use lazy loading for routes

## Security Checklist

- Validate all user inputs
- Implement proper authentication
- Use HTTPS in production
- Secure environment variables
- Regular dependency updates
- Input sanitization

## 커밋 메시지 작성법

### 기본 형식

```
<type>(<scope>): <description>

<body>

<footer>
```

### Type 종류

- **feat**: 새로운 기능 추가
- **fix**: 버그 수정
- **refactor**: 코드 리팩토링
- **style**: 코드 스타일 변경 (포맷팅, 세미콜론 등)
- **docs**: 문서 수정
- **test**: 테스트 코드 추가/수정
- **chore**: 빌드 프로세스, 도구 설정 등
- **perf**: 성능 개선
- **ci**: CI/CD 설정 변경

### Scope 종류

- **be**: 백엔드 (Java, Spring Boot)
- **fe**: 프론트엔드 (React, 웹)
- **mobile**: 모바일 (React Native, Expo)
- **api**: API 패키지
- **types**: 타입 정의 패키지
- **utils**: 유틸리티 패키지
- **mappers**: 매퍼 패키지
- **hooks**: 훅 패키지
- **config**: 설정 파일
- **deps**: 의존성 관리

### 예시

```bash
# 새로운 기능
feat(api): 사용자 프로필 업데이트 API 추가
feat(mobile): 일기 작성 화면 추가
feat(be): 챌린지 참여 API 구현

# 버그 수정
fix(mobile): FormData.forEach 오류 수정
fix(fe): 로그인 상태 관리 버그 수정
fix(api): TypeScript 제네릭 타입 오류 수정

# 리팩토링
refactor(packages): dist 파일 의존성 제거 및 TypeScript 직접 사용
refactor(fe): 컴포넌트 구조 개선
refactor(be): 서비스 레이어 분리

# 문서
docs(api): API 사용법 가이드 추가
docs(workflow): 개발 워크플로우 문서 업데이트

# 설정
chore(config): 빌드 스크립트 최적화
chore(deps): 패키지 의존성 업데이트
```

### 다중 변경사항

```bash
# 여러 패키지 동시 수정
refactor(packages): 모든 패키지에서 dist 파일 의존성 제거

- @mooddisk/api: TypeScript 직접 사용으로 변경
- @mooddisk/types: 빌드 스크립트 개선
- @mooddisk/utils: tsconfig.json 최적화
- @mooddisk/mappers: 개발 모드 추가
- @mooddisk/hooks: 감시 모드 스크립트 추가
```

### 중요 규칙

1. **한글로 작성**: 모든 커밋 메시지는 한글로 작성
2. **명확한 설명**: 무엇을 왜 변경했는지 명확히 기술
3. **스코프 명시**: 어떤 영역을 수정했는지 반드시 명시
4. **일관성**: 팀 내에서 동일한 형식 사용
5. **간결함**: 50자 이내로 제목 작성

  description:
  globs:
  alwaysApply: false

---
